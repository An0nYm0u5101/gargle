<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Non-interactive auth • gargle</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Non-interactive auth">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gargle</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/articles/managing-tokens-securely.html">Managing tokens securely</a>
    </li>
    <li>
      <a href="../articles/gargle-auth-in-client-package.html">How to use gargle for auth in a client package</a>
    </li>
    <li>
      <a href="../articles/get-api-credentials.html">How to get your own API credentials</a>
    </li>
    <li>
      <a href="../articles/how-gargle-gets-tokens.html">How gargle gets tokens</a>
    </li>
    <li>
      <a href="../articles/non-interactive-auth.html">Non-interactive auth</a>
    </li>
    <li>
      <a href="../articles/request-helper-functions.html">Request helper functions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/gargle">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Non-interactive auth</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/gargle/blob/master/vignettes/non-interactive-auth.Rmd"><code>vignettes/non-interactive-auth.Rmd</code></a></small>
      <div class="hidden name"><code>non-interactive-auth.Rmd</code></div>

    </div>

    
    
<p>Here we describe how to do auth in a package that uses gargle, without requiring any user interaction.</p>
<ul>
<li>We assume the wrapper package uses the design described in <a href="https://gargle.r-lib.org/articles/gargle-auth-in-client-package.html">How to use gargle for auth in a client package</a>. Examples include:
<ul>
<li>
<a href="https://bigrquery.r-dbi.org">bigrquery</a> (&gt;= v1.2.0)</li>
<li>
<a href="https://googledrive.tidyverse.org">googledrive</a> (&gt;= v1.0.0)</li>
<li>
<a href="https://gmailr.r-lib.org">gmailr</a> (&gt;= v1.0.0)</li>
<li>
<a href="https://googlesheets4.tidyverse.org">googlesheets4</a> <em>GitHub only</em>
</li>
<li>
<a href="https://andrie.github.io/gcalendr/">gcalendr</a> <em>GitHub only</em>
</li>
</ul>
</li>
<li>Full details on <a href="https://gargle.r-lib.org/reference/token_fetch.html"><code><a href="../reference/token_fetch.html">gargle::token_fetch()</a></code></a>, which powers this strategy, are given in <a href="https://gargle.r-lib.org/articles/how-gargle-gets-tokens.html">How gargle gets tokens</a>.</li>
</ul>
<div id="provide-a-token-or-pre-authorize-token-discovery" class="section level2">
<h2 class="hasAnchor">
<a href="#provide-a-token-or-pre-authorize-token-discovery" class="anchor"></a>Provide a token or pre-authorize token discovery</h2>
<p>The main principle for auth that does not require user interaction:</p>
<blockquote>
<p>Provide a token directly or take advance measures that indicate you want a token to be discovered.</p>
</blockquote>
<p>Here are several ways to achieve this, basically in order of preference.</p>
</div>
<div id="provide-a-service-account-token-directly" class="section level2">
<h2 class="hasAnchor">
<a href="#provide-a-service-account-token-directly" class="anchor"></a>Provide a service account token directly</h2>
<p>When two computers are talking to each other, possibly with no human involvement, the most appropriate type of token to use is a service account token.</p>
<p>This requires some advance preparation, but that tends to pay off pretty quickly, in terms of having a much more robust auth setup.</p>
<p><strong>Step 1</strong>: Get a service account and then download a token. Described in the gargle article <a href="https://gargle.r-lib.org/articles/get-api-credentials.html">How to get your own API credentials</a>, specifically in the <a href="https://gargle.r-lib.org/articles/get-api-credentials.html#service-account-token">Service account token</a> section.</p>
<p><strong>Step 2</strong>: Call the wrapper package’s main auth function proactively and provide the path to your service account token. Example using googledrive:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(googledrive)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">drive_auth</span>(<span class="dt">path =</span> <span class="st">"/path/to/your/service-account-token.json"</span>)</a></code></pre></div>
<p>If this code is running on, e.g., a continuous integration service and you need to use an encrypted token, see the gargle article <a href="https://gargle.r-lib.org/articles/articles/managing-tokens-securely.html">Managing tokens securely</a>.</p>
<p>For certain APIs, service accounts are inherently awkward, in which case you might have to resort to an OAuth user token. Gmail is a good example. In this case, you might want the service account to act on your behalf, e.g., to send email as you. This is described as “impersonation”, which should tip you off that Google does not really encourage this workflow. This requires <a href="Delegating%20domain-wide%20authority%20to%20the%20service%20account">granting the service account domain-wide authority</a>, which requires that your account is associated with a G Suite domain and also approval from the domain’s administrator. If this is impossible or unappealing, just use an OAuth user token, as described below.</p>
</div>
<div id="rig-a-service-account-token-as-application-default-credentials" class="section level2">
<h2 class="hasAnchor">
<a href="#rig-a-service-account-token-as-application-default-credentials" class="anchor"></a>Rig a service account token as Application Default Credentials</h2>
<p>Wrapper packages that use <code><a href="../reference/token_fetch.html">gargle::token_fetch()</a></code> in the recommended way have access to the token search strategy known as <strong>Application Default Credentials</strong>.</p>
<p>You need to put your service token in a very specific location or, alternatively, record the location of your service token in a specific environment variable.</p>
<p>Full details are in the <a href="https://gargle.r-lib.org/articles/how-gargle-gets-tokens.html#credentials_app_default"><code><a href="../reference/credentials_app_default.html">credentials_app_default()</a></code> section</a> of the gargle article <a href="https://gargle.r-lib.org/articles/how-gargle-gets-tokens.html">How gargle gets tokens</a>.</p>
<p>If you have your token rigged properly, you <strong>do not</strong> need to do anything else, i.e. you do not need to call <code>PACKAGE_auth()</code> explicitly. Your token should just get discovered upon first need.</p>
<p>For troubleshooting purposes, you can temporarily toggle a gargle option to see verbose output about the execution of <code><a href="../reference/token_fetch.html">gargle::token_fetch()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(<span class="dt">gargle_quiet =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
</div>
<div id="provide-an-oauth-token-directly" class="section level2">
<h2 class="hasAnchor">
<a href="#provide-an-oauth-token-directly" class="anchor"></a>Provide an OAuth token directly</h2>
<p>If you somehow have the OAuth token you want to use as an R object, you can provide it directly to the <code>token</code> argument of the main auth function. Example using googledrive:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(googledrive)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">my_oauth_token &lt;-<span class="st"> </span><span class="co"># some process that results in the token you want to use</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">drive_auth</span>(<span class="dt">token =</span> my_oauth_token)</a></code></pre></div>
<p>gargle caches each OAuth token it obtains to an <code>.rds</code> file, by default. If you know the filepath to the token you want to use, you could use <code><a href="https://www.rdocumentation.org/packages/base/topics/readRDS">readRDS()</a></code> to read it and provide as the <code>token</code> argument to the wrapper’s auth function. Example using googledrive:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># googledrive</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">drive_auth</span>(<span class="dt">token =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/readRDS">readRDS</a></span>(<span class="st">"/path/to/your/oauth-token.rds"</span>))</a></code></pre></div>
<p>How would you know this filepath? That requires some attention to the location of gargle’s OAuth token cache folder, which is described in the next section.</p>
<p>Full details are in the <a href="https://gargle.r-lib.org/articles/how-gargle-gets-tokens.html#credentials_byo_oauth2"><code><a href="../reference/credentials_byo_oauth2.html">credentials_byo_oauth2()</a></code> section</a> of the gargle article <a href="https://gargle.r-lib.org/articles/how-gargle-gets-tokens.html">How gargle gets tokens</a>.</p>
</div>
<div id="arrange-for-an-oauth-token-to-be-discovered" class="section level2">
<h2 class="hasAnchor">
<a href="#arrange-for-an-oauth-token-to-be-discovered" class="anchor"></a>Arrange for an OAuth token to be discovered</h2>
<p>This is the least recommended strategy, but it appeals to many users, because it doesn’t require creating a service account. Just remember that the perceived ease of using the token you already have (an OAuth user token) is quickly cancelled out by the greater difficulty of managing such tokens for non-interactive use. You might be forced to use this strategy with certain APIs, such as Gmail, that are difficult to use with a service account.</p>
<p>Two main principles:</p>
<ol style="list-style-type: decimal">
<li>Take charge of – or at least notice – the folder where OAuth tokens are being cached.</li>
<li>Make sure exactly one cached token will be identified and pre-authorize its use.</li>
</ol>
<p>There are many ways to do this. We’ll show a specific example that should convey the general idea.</p>
<div id="create-a-cache-for-a-specific-project" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-cache-for-a-specific-project" class="anchor"></a>Create a cache for a specific project</h3>
<p><strong>Step 1</strong>: Obtain the token intended for non-interactive use and make sure it’s cached in a (hidden) directory of the current project. Using <a href="https://andrie.github.io/gcalendr/">gcalendr</a> as an example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gcalendr)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co"># designate project-specific cache</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(<span class="dt">gargle_oauth_cache =</span> <span class="st">".secrets"</span>)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co"># check the value of the option, if you like</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">gargle<span class="op">::</span><span class="kw"><a href="https://gargle.r-lib.org/reference/gargle_options.html">gargle_oauth_cache</a></span>()</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co"># trigger auth on purpose --&gt; store a token in the specified cache</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="kw">calendar_auth</span>()</a>
<a class="sourceLine" id="cb5-11" data-line-number="11"></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co"># see your token file in the cache, if you like</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(<span class="st">".secrets/"</span>)</a></code></pre></div>
<p>You do this setup once per project.</p>
<p>Another way to accomplish the same setup is to specify the desired cache location directly in the call to the auth function:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gcalendr)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co"># trigger auth on purpose --&gt; store a token in the specified cache</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw">calendar_auth</span>(<span class="dt">cache =</span> <span class="st">".secrets"</span>)</a></code></pre></div>
</div>
<div id="ensure-desired-token-will-be-found-and-used" class="section level3">
<h3 class="hasAnchor">
<a href="#ensure-desired-token-will-be-found-and-used" class="anchor"></a>Ensure desired token will be found and used</h3>
<p><strong>Step 2</strong>: Announce the location of the cache and pre-authorize the use of a suitable token discovered there. Continuing the gcalendr example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gcalendr)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">  <span class="dt">gargle_oauth_cache =</span> <span class="st">".secrets"</span>,</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  <span class="dt">gargle_oauth_email =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co"># now use gcalendr with no need for explicit auth</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="kw">calendar_list</span>()</a></code></pre></div>
<p>Setting the option <code>gargle_oauth_email = TRUE</code> says that gcalendr is allowed to use a token that it finds in the cache, without interacting with a user, as long as it discovers EXACTLY one matching token. This option-setting code needs to appear in each script, <code>.Rmd</code>, or app that needs to use this token non-interactively. Depending on the context, it might be suitable to accomplish this in a startup file, e.g. project-level <code>.Rprofile</code>.</p>
<p>Here’s a variation where we say which token to use by explicitly specifying the associated email. This is handy if there’s a reason to have more than one token in the cache.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gcalendr)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">  <span class="dt">gargle_oauth_cache =</span> <span class="st">".secrets"</span>,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">  <span class="dt">gargle_oauth_email =</span> <span class="st">"jenny@example.org"</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb8-7" data-line-number="7"></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co"># now use gcalendr with no need for explicit auth</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="kw">calendar_list</span>()</a></code></pre></div>
<p>Here’s another variation where we specify the necessary info directly in an auth call, instead of in options:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gcalendr)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">calendar_auth</span>(<span class="dt">cache =</span> <span class="st">".secrets"</span>, <span class="dt">email =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co"># now use gcalendr with no need for explicit auth</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="kw">calendar_list</span>()</a></code></pre></div>
<p>Here’s one last variation that applicable when the local cache could contain multiple tokens:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gcalendr)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">calendar_auth</span>(<span class="dt">cache =</span> <span class="st">".secrets"</span>, <span class="dt">email =</span> <span class="st">"jenny@example.org"</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co"># now use gcalendr with no need for explicit auth</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="kw">calendar_list</span>()</a></code></pre></div>
<p>Be very intentional about paths and working directory. Personally I would use <code>here::here(".secrets)"</code> everywhere above, to make things more robust.</p>
<p>For troubleshooting purposes, you can temporarily toggle a gargle option to see verbose output about the execution of <code><a href="../reference/token_fetch.html">gargle::token_fetch()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(<span class="dt">gargle_quiet =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>For a cached token to be considered a “match”, it must match the current request with respect to user’s email, scopes, and OAuth app (client ID or key and secret). By design, these settings have very low visibility, because we usually want to use the defaults. If your token is not being discovered, consider if any of these fields might explain the mismatch.</p>
</div>
<div id="a-word-about-deployed-environments" class="section level3">
<h3 class="hasAnchor">
<a href="#a-word-about-deployed-environments" class="anchor"></a>A word about deployed environments</h3>
<p>The workflow described above is relevant to any project that is developed in one place, with interactivity – such as your local computer – and then deployed elsewhere, where it must run without further interaction – such as on <a href="https://www.rstudio.com/products/connect/">RStudio Connect</a> or <a href="https://www.shinyapps.io">shinyapps.io</a>. In this context, it does make sense to depart from gargle’s default behaviour and create a project-level cache, embedded in the project. Remember, however, that your token is no more secure or hidden than the other source files in your project.</p>
<p>If you are trying to rig a token to work with continuous integration services, such as Travis-CI or AppVeyor, you need to take additional measure to encrypt your token. This is workflow is described in <a href="https://gargle.r-lib.org/articles/articles/managing-tokens-securely.html">Managing tokens securely</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#provide-a-token-or-pre-authorize-token-discovery">Provide a token or pre-authorize token discovery</a></li>
      <li><a href="#provide-a-service-account-token-directly">Provide a service account token directly</a></li>
      <li><a href="#rig-a-service-account-token-as-application-default-credentials">Rig a service account token as Application Default Credentials</a></li>
      <li><a href="#provide-an-oauth-token-directly">Provide an OAuth token directly</a></li>
      <li><a href="#arrange-for-an-oauth-token-to-be-discovered">Arrange for an OAuth token to be discovered</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://jennybryan.org">Jennifer Bryan</a>, Craig Citro, <a href="http://hadley.nz">Hadley Wickham</a>, <a href="https://www.rstudio.com"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
