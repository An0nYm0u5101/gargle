<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to get your own API credentials • gargle</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to get your own API credentials">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gargle</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/articles/managing-tokens-securely.html">Managing tokens securely</a>
    </li>
    <li>
      <a href="../articles/gargle-auth-in-client-package.html">How to use gargle for auth in a client package</a>
    </li>
    <li>
      <a href="../articles/get-api-credentials.html">How to get your own API credentials</a>
    </li>
    <li>
      <a href="../articles/how-gargle-gets-tokens.html">How gargle gets tokens</a>
    </li>
    <li>
      <a href="../articles/request-helper-functions.html">Request helper functions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/gargle">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>How to get your own API credentials</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/gargle/blob/master/vignettes/get-api-credentials.Rmd"><code>vignettes/get-api-credentials.Rmd</code></a></small>
      <div class="hidden name"><code>get-api-credentials.Rmd</code></div>

    </div>

    
    
<p>Here we describe how to obtain two credentials that are important when working with a Google API:</p>
<ul>
<li>API key (not relevant to all APIs)</li>
<li>OAuth 2.0 client ID and secret</li>
</ul>
<p>This can be important for both users and developers:</p>
<ul>
<li>Package authors: If you are writing a package to wrap a Google API, you may provide built-in credentials so that things “just work” for your users. Regardless, you will need credentials to use during package development and in testing.</li>
<li>Package users: Wrapper packages may or may not provide default credentials. If they don’t, you are required to provide your own. Even if they do, you may prefer to bring your own.</li>
</ul>
<div id="get-a-google-cloud-platform-project" class="section level2">
<h2 class="hasAnchor">
<a href="#get-a-google-cloud-platform-project" class="anchor"></a>Get a Google Cloud Platform project</h2>
<p>You will need a Google Cloud Platform (GCP) project to hold your credentials.</p>
<p>Go to the Google Cloud Platform Console:</p>
<ul>
<li><a href="https://console.cloud.google.com" class="uri">https://console.cloud.google.com</a></li>
<li>This may involve logging in or selecting your preferred Google identity.</li>
<li>This may involve selecting the relevant organization.</li>
</ul>
<p>This console is your general destination for inspecting and modifying your GCP projects.</p>
<p>Create a new project here, if necessary. Otherwise, select the project of interest, if you have more than one.</p>
</div>
<div id="enable-apis" class="section level2">
<h2 class="hasAnchor">
<a href="#enable-apis" class="anchor"></a>Enable API(s)</h2>
<p>Enable the relevant APIs(s) for your GCP project.</p>
<p>In the left sidebar, navigate to <em>APIs &amp; Services &gt; Library</em>.</p>
<p>Identify the API of interest. Click Enable.</p>
</div>
<div id="api-key" class="section level2">
<h2 class="hasAnchor">
<a href="#api-key" class="anchor"></a>API Key</h2>
<p>Some APIs accept requests to read public resources, in which case the request can be sent with an API key in lieu of a token. If this is possible, it’s a good idea to expose this, because then it’s possible to user the wrapper package in a “de-authed” mode. When using the package in a non-interactive or indirect fashion (e.g. a scheduled job on a remote server or via Shiny), it is wonderful to NOT have to manage a token, if the work can be done with an API key instead.</p>
<p><em>Some APIs aren’t really usable without a token, in which case an API key may not be relevant and you can ignore this section.</em></p>
<ul>
<li>From the Developers Console, in the target GCP Project, go to <em>APIs &amp; Services &gt; Credentials</em>.</li>
<li>Do <em>Create credentials &gt; API key</em>.</li>
<li>You can capture the new API key via clipboard right away or close this pop-up and copy it later from the Credentials page.</li>
<li>In any case, I suggest you take the opportunity to edit the API key from the Credentials page and give it a nickname.</li>
</ul>
<p>Package maintainers might want to build an API key in as a fallback, possibly taking some measures to obfuscate the key and limit its use to your package.</p>
<p>Package users could register an API key for use with a wrapper package. For example, in googledrive, one would use <code>googledrive::drive_auth_configure()</code> to store a key for use in downstream requests.</p>
</div>
<div id="oauth-client-id-and-secret" class="section level2">
<h2 class="hasAnchor">
<a href="#oauth-client-id-and-secret" class="anchor"></a>OAuth client ID and secret</h2>
<p>Most APIs are used to create and modify resources on behalf of the user and these requests must include the user’s token. A regular user will generally need to send an OAuth2 token, which is obtained under the auspices of an OAuth “app” or “client”.</p>
<p>The basic steps are described in the <a href="https://developers.google.com/identity/protocols/OAuth2InstalledApp#prerequisites">Prerequisites section</a> for doing Google OAuth 2.0 for Mobile &amp; Desktop Apps:</p>
<ul>
<li>From the Developers Console, in the target GCP Project, go to <em>APIs &amp; Services &gt; Credentials</em>.</li>
<li>Do <em>Create credentials &gt; OAuth client ID</em>.</li>
<li>Select Application type “Other”.</li>
<li>You can capture the client ID and secret via clipboard right away.</li>
<li>At any time, you can navigate to a particular client ID and click “Download JSON”.</li>
</ul>
<p>Two ways to package this info for use with httr or gargle, both of which require an object of class <code><a href="https://www.rdocumentation.org/packages/httr/topics/oauth_app">httr::oauth_app</a></code>:</p>
<ol style="list-style-type: decimal">
<li>Use <code><a href="https://www.rdocumentation.org/packages/httr/topics/oauth_app">httr::oauth_app()</a></code>.
<ul>
<li>The client ID goes in the <code>key</code> argument.</li>
<li>The client secret goes in the <code>secret</code> argument.</li>
</ul>
</li>
<li>Use <code><a href="../reference/oauth_app_from_json.html">gargle::oauth_app_from_json()</a></code>.
<ul>
<li>Provide the path to the downloaded JSON file.</li>
</ul>
</li>
</ol>
<p>In both cases, I suggest you devise a nickname for each OAuth credential and use it as the credential’s name in GCP Console and as the <code>appname</code> argument to <code><a href="https://www.rdocumentation.org/packages/httr/topics/oauth_app">httr::oauth_app()</a></code> or <code><a href="../reference/oauth_app_from_json.html">gargle::oauth_app_from_json()</a></code>.</p>
<p>Package maintainers might want to build this app in as a fallback, possibly taking some measures to obfuscate the client ID and secret and limit its use to your package.</p>
<ul>
<li>Note that so-called “three-legged OAuth” always requires the involvement of a user, so the word “secret” here can be somewhat confusing. It is not a secret in the same sense as a password or token. But you probably still want to store it in an opaque way, so that someone else cannot easily “borrow” it and present an OAuth consent screen that impersonates your package.</li>
</ul>
<p>Package users could register this app for use with a wrapper package. For example, in googledrive, one would use <code>googledrive::drive_auth_configure()</code> to store an app for use in downstream requests.</p>
</div>
<div id="further-reading" class="section level2">
<h2 class="hasAnchor">
<a href="#further-reading" class="anchor"></a>Further reading</h2>
<p>Learn more in Google’s documentation:</p>
<ul>
<li><a href="https://support.google.com/googleapi/answer/6158857?hl=en&amp;ref_topic=7013279">Credentials, access, security, and identity</a></li>
<li><a href="https://developers.google.com/identity/protocols/OAuth2InstalledApp">Using OAuth 2.0 for Installed Applications</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#get-a-google-cloud-platform-project">Get a Google Cloud Platform project</a></li>
      <li><a href="#enable-apis">Enable API(s)</a></li>
      <li><a href="#api-key">API Key</a></li>
      <li><a href="#oauth-client-id-and-secret">OAuth client ID and secret</a></li>
      <li><a href="#further-reading">Further reading</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://jennybryan.org">Jennifer Bryan</a>, Craig Citro, <a href="http://hadley.nz">Hadley Wickham</a>, <a href="https://www.rstudio.com"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
